<!DOCTYPE html>
<html>
<head>
</head>
<body>

  <script>

  var str = "[FINAL].[PROJECT].[PROJNO] = [DEPARTMENT].[DEPTNO] AND [FINAL].[PROJECT].[PROJNAME] = [DEPARTMENT].[DEPTNAME] AND [FINAL].[PROJECT].[DEPTNO] = [DEPARTMENT].[MGRNO] AND [FINAL].[PROJECT].[RESPEMP] = [DEPARTMENT].[ADMRDEPT]";

  var pktable = "Final";
  var pkcolumn = "PROJECT";

  var exp = "\s=\s{1,}\\[" + type + "\\]\.\\[" + alias + "\\]\.\\[(.*?)\\]";

  var regexp = new RegExp(exp, "gi");

  var match;
  var matches = [];

  while(match = regexp.exec(str)){
    matches.push(match[1]);
  };

  console.log(matches);

  console.log(type.join('[]'));

  </script>

</body>
</html>
